<div class="flex flex-row justify-between items-center bg-primary h-10">
  <h2 class="text-white font-bold px-6">{{dialogueData?.header |translate}}</h2>
  <mat-icon class="cursor-pointer text-white pr-8" [mat-dialog-close]="false">close</mat-icon>
</div>
<div mat-dialog-content class="h-30">
  @if(dialogueData?.fields){
    @for(field of dialogueData?.fields; track field){
      <div class="mb-4">
        <div class="font-bold mb-1">{{ field.label |translate}}</div>
        <div class="mb-2">{{ field?.value }}</div>
      </div>
    }
  }
  <h3 class="text-sm font-bold p-4">{{dialogueData?.content |translate}}</h3>
  @if(dialogueData.reportContent){
    <div class="pb-6 flex items-center">
      <mat-checkbox [(ngModel)]="reportContent"> Report content</mat-checkbox>
      <mat-icon style="color: red;">warning</mat-icon>
    </div>
  }
  @if(reportContent || !dialogueData.reportContent){
    <form #dialogueForm="ngForm">
      @if(dialogueData?.form){
        @for(control of dialogueData?.form; track control){
          <div class="flex">
            <mat-form-field class="w-full" appearance="outline" floatLabel="always">
              <mat-label>{{ control.label }}</mat-label>
              <input matInput id="exampleInput"  [(ngModel)]="title"   #input="ngModel" name="{{control.name}}" [placeholder]="control.placeHolder"
              [maxlength]="control?.validators.maxLength"
              [required]="control?.validators?.required"
              [pattern]="control?.validators?.pattern">
            </mat-form-field>
          </div>
            <mat-error class="error-container">
              @if(input.touched && dialogueForm.controls[control.name] && dialogueForm.controls[control.name].errors){
              <div class="error-message">
                <mat-icon class="error-icon" matPrefix>error_outline</mat-icon>
                @if(dialogueForm.controls[control.name]?.errors?.['required']){
                  <span>{{control.errorMessage.required}}</span>
                }
                @if(dialogueForm.controls[control.name]?.errors?.['pattern']){
                  <span>{{control.errorMessage.pattern}}</span>
                }
                @if(dialogueForm.controls[control.name]?.errors?.['maxlength']){
                  <span>{{control.errorMessage.maxLength}}</span>
                }
              </div>
            }
            </mat-error>
        }
      }
    </form>
  }
 
</div>
<div class="border-t"></div> 
<div class="flex flex-row justify-end items-center">
  @if(dialogueData.cancelButton){
    <button  class="btn text-primary w-30 min-w-[135px]" [mat-dialog-close]="{ data: dialogueData.cancelButton }">{{dialogueData.cancelButton |translate}}</button>
  }
  @if(dialogueData.exitButton){
    <button class="btn bg-primary text-white w-30 min-w-[135px]" [mat-dialog-close]="{ data: dialogueData.exitButton, title: title , isReported :(reportContent ?reportContent :false) }">{{dialogueData.exitButton |translate}}</button>
  }
</div>
